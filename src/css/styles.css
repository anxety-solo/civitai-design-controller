@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap');

/* === CSS Variables for Color Customization === */
:root {
    /* General Settings */
    --popup-width: 90%;
    --popup-max-height: 90vh;
    --popup-body-max-height: 70vh;
    --layout-mode-list-width: 700px;
    --layout-mode-grid-width: 850px;

    /* Font/Text Colors */
    --text-primary: #f3f4f5;
    --text-secondary: #e1e5e9;
    --text-tertiary: #9ca3af;
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-family-secondary: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

    /* Primary Colors */
    --primary-color: #667eea;
    --primary-hover: #7d8feb;
    --primary-color-05: color-mix(in srgb, var(--primary-color) 5%, transparent);
    --primary-color-10: color-mix(in srgb, var(--primary-color) 10%, transparent);
    --primary-color-20: color-mix(in srgb, var(--primary-color) 20%, transparent);
    --primary-color-30: color-mix(in srgb, var(--primary-color) 30%, transparent);
    --primary-color-40: color-mix(in srgb, var(--primary-color) 40%, transparent);
    --primary-color-50: color-mix(in srgb, var(--primary-color) 50%, transparent);

    /* Secondary Colors */
    --secondary-color: #8957bb;
    --secondary-hover: #9c6ed1;
    --secondary-color-05: color-mix(in srgb, var(--secondary-color) 5%, transparent);
    --secondary-color-10: color-mix(in srgb, var(--secondary-color) 10%, transparent);
    --secondary-color-20: color-mix(in srgb, var(--secondary-color) 20%, transparent);
    --secondary-color-30: color-mix(in srgb, var(--secondary-color) 30%, transparent);
    --secondary-color-40: color-mix(in srgb, var(--secondary-color) 40%, transparent);
    --secondary-color-50: color-mix(in srgb, var(--secondary-color) 50%, transparent);

    /* Background Colors */
    --bg-primary: rgba(26, 27, 35, 0.95);
    --bg-secondary: rgba(20, 21, 30, 0.4);
    --bg-tertiary: rgba(255, 255, 255, 0.025);
    --bg-overlay: rgba(0, 0, 0, 0.8);

    /* Border Colors */
    --border-primary: rgba(45, 46, 63, 0.5);
    --border-secondary: rgba(45, 46, 63, 0.45);
    --border-tertiary: rgba(75, 85, 99, 0.3);

    /* Close Button Colors */
    --close-btn-color: var(--text-tertiary);
    --close-btn-bg: rgba(255, 255, 255, 0.05);
    --close-btn-border: rgba(255, 255, 255, 0.2);
    --close-btn-hover-color: rgba(255, 50, 45, 1);
    --close-btn-hover-bg: rgba(255, 50, 45, 0.2);
    --close-btn-hover-border: rgba(255, 50, 45, 0.5);

    /* Scrollbar Colors */
    --scrollbar-track: rgba(26, 27, 35, 0.4);
    --scrollbar-thumb: var(--primary-color-40);

    /* Language/Theme Selector Colors */
    --selector-bg: rgba(45, 46, 63, 0.7);
    --selector-border: #3e4753;
    --selector-dropdown-bg: #1a1b23;
    --selector-dropdown-border: #2d2e3f;
    --selector-option-hover: var(--primary-color-05);
    --selector-option-active: var(--primary-color-20);

    /* Switch/Checkbox Colors */
    --switch-thumb-bg: white;
    --switch-bg: #3a3c4e;
    --switch-border: #3e4753;
    --switch-active-bg: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    --switch-active-border: var(--primary-color-50);

    /* Slider Colors */
    --slider-track-bg: #3a3c4e;
    --slider-track-border: #3e4753;
    --slider-progress-start: var(--primary-color);
    --slider-progress-end: var(--secondary-color);
    --slider-thumb-bg: white;
    --slider-thumb-border: var(--primary-color);

    /* Button Colors */
    --btn-primary-color: var(--text-primary);
    --btn-primary-bg: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    --btn-primary-shadow: var(--primary-color-30);
    --btn-secondary-color: var(--text-secondary);
    --btn-secondary-bg: rgba(55, 65, 81, 0.5);
    --btn-secondary-border: rgba(75, 85, 99, 0.5);
    --btn-secondary-hover: rgba(75, 85, 99, 0.7);

    /* Shadow Colors */
    --shadow-light: rgba(255, 255, 255, 0.1);
    --shadow-dark: rgba(0, 0, 0, 0.4);
    --shadow-primary: var(--primary-color-50);
    --shadow-primary-light: var(--primary-color-40);
}

/* Light Theme Variables */
[data-theme='light'] {
    /* Font/Text Colors */
    --text-primary: #111827;
    --text-secondary: #1f2937;
    --text-tertiary: #4b5563;

    /* Background Colors */
    --bg-primary: rgba(255, 255, 255, 0.98);
    --bg-secondary: rgba(248, 250, 252, 0.95);
    --bg-tertiary: rgba(0, 0, 0, 0.04);
    --bg-overlay: rgba(0, 0, 0, 0.4);

    /* Border Colors */
    --border-primary: rgba(156, 163, 175, 0.9);
    --border-secondary: rgba(209, 213, 219, 0.9);
    --border-tertiary: rgba(107, 114, 128, 0.6);

    /* Close Button Colors */
    --close-btn-color: var(--text-tertiary);
    --close-btn-bg: rgba(0, 0, 0, 0.08);
    --close-btn-border: rgba(0, 0, 0, 0.15);
    --close-btn-hover-color: rgba(220, 38, 38, 1);
    --close-btn-hover-bg: rgba(220, 38, 38, 0.15);
    --close-btn-hover-border: rgba(220, 38, 38, 0.4);

    /* Scrollbar Colors */
    --scrollbar-track: rgba(255, 255, 255, 0.4);

    /* Language/Theme Selector Colors */
    --selector-bg: rgba(255, 255, 255, 0.95);
    --selector-border: #b4bbc9;
    --selector-dropdown-bg: #fdfdfd;
    --selector-dropdown-border: #c2c5ca;
    --selector-option-hover: var(--primary-color-10);
    --selector-option-active: var(--primary-color-30);

    /* Switch/Checkbox Colors */
    --switch-bg: #d1d5db;
    --switch-border: #b4bbc9;

    /* Slider Colors */
    --slider-track-bg: #d1d5db;
    --slider-track-border: #b4bbc9;

    /* Button Colors */
    --btn-secondary-color: var(--text-secondary);
    --btn-secondary-bg: rgba(150, 163, 185, 0.5);
    --btn-secondary-border: rgba(150, 163, 185, 0.5);
    --btn-secondary-hover: rgba(150, 163, 185, 0.5);

    /* Shadow Colors */
    --shadow-light: rgba(0, 0, 0, 0.25);
    --shadow-dark: rgba(0, 0, 0, 0.35);
}

/* === Control button === */
.civitai-design-controller {
    position: relative;
    margin: 0 4px;
    width: 40px;
    height: 40px;
    box-sizing: border-box;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    border-radius: 50%;
    box-shadow: 0 0 0 2px var(--shadow-light);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: white;
    z-index: 10000;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.civitai-design-controller:hover {
    transform: scale(1.04);
    box-shadow: 0 6px 16px var(--shadow-primary), 0 0 0 3px rgba(255, 255, 255, 0.15);
}

.civitai-design-controller svg {
    fill: white;
    transition: transform 0.3s ease;
}
.civitai-design-controller:hover svg {
    transform: rotate(90deg);
}

/* === Settings pop-up === */
.civitai-settings-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-overlay);
    backdrop-filter: blur(12px);
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    opacity: 0;
    font-family: var(--font-family);
    user-select: none;
    transition: opacity 0.3s ease-out;
}
.civitai-settings-popup.show {
    opacity: 1;
}
.civitai-settings-popup.closing {
    opacity: 0;
}

.civitai-popup-content {
    width: var(--popup-width);
    max-height: var(--popup-max-height);
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    box-shadow: 0 25px 50px var(--shadow-dark);
    box-sizing: border-box;
    overflow: hidden;
    transform: translateY(30px) scale(0.95);
    user-select: none;
    transition: all 0.4s cubic-bezier(0.35, 1.55, 0.65, 1), max-width 0.4s ease;
}
.civitai-popup-content[data-layout='list'] {
    max-width: var(--layout-mode-list-width);
}
.civitai-popup-content[data-layout='grid'] {
    max-width: var(--layout-mode-grid-width);
}

.civitai-settings-popup.show .civitai-popup-content {
    transform: translateY(0) scale(1);
}

.civitai-popup-content.closing {
    transform: translateY(40px) scale(0.9);
    opacity: 0;
}

/* Header */
.civitai-popup-header {
    position: relative;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-primary);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.civitai-popup-header h3 {
    margin: 0;
    width: 100%;
    font-size: 24px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 0;
    text-align: center;
}

.civitai-layout-toggle {
    position: absolute;
    top: 20px;
    left: 20px;
    width: 40px;
    height: 40px;
    color: var(--primary-color);
    background: var(--primary-color-10);
    border: 1px solid var(--primary-color-30);
    border-radius: 12px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}
.civitai-layout-toggle:hover {
    background: var(--primary-color-20);
    border-color: var(--primary-color-50);
    transform: scale(1.05);
}

.civitai-layout-toggle svg {
    transition: transform 0.3s ease;
}
.civitai-layout-toggle:hover svg {
    transform: scale(1.1);
}

.civitai-close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    color: var(--close-btn-color);
    background: var(--close-btn-bg);
    border: 1px solid var(--close-btn-border);
    border-radius: 12px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}
.civitai-close-btn:hover {
    color: var(--close-btn-hover-color);
    background: var(--close-btn-hover-bg);
    border-color: var(--close-btn-hover-border);
    transform: scale(1.05);
}

.civitai-close-btn svg {
    transition: transform 0.3s ease;
}
.civitai-close-btn:hover svg {
    transform: rotate(90deg);
}

/* Body */
.civitai-popup-body {
    padding: 20px 24px;
    max-height: var(--popup-body-max-height);
    color: var(--text-secondary);
    box-sizing: border-box;
    overflow-y: auto;
}

/* -- Custom scrollbar -- */
.civitai-popup-body::-webkit-scrollbar {
    width: 6px;
}
.civitai-popup-body::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
}
.civitai-popup-body::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
}

/* Section headings */
.civitai-section-title {
    position: relative;
    margin: 24px 0 16px;
    padding: 0 16px;
    color: var(--text-primary);
    font-size: 18px;
    font-weight: 600;
}
.civitai-section-title::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 16px;
    right: 16px;
    height: 1px;
    background: linear-gradient(90deg, var(--primary-color-40), transparent);
}

/* -- Layouts -- */
.civitai-settings-layout {
    margin-bottom: 16px;
    transition: all 0.4s cubic-bezier(0.35, 1.55, 0.65, 1);
}
.civitai-settings-layout.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}
.civitai-settings-layout.list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Settings elements (parameters) */
.civitai-setting-item {
    position: relative;
    padding: 18px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    gap: 16px;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.civitai-setting-item.preferences-column {
    grid-column: 1 / -1;
    background: var(--primary-color-05);
    border: 1px solid var(--primary-color-20);
    flex-direction: column;
    align-items: stretch;
    gap: 0;
    padding: 0;
}
.civitai-preferences-row {
    display: flex;
    width: 100%;
}
.civitai-preference-group {
    padding: 18px 16px;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.civitai-preference-group.language-group {
    flex: 0 0 50%;
    border-right: 1px solid var(--primary-color-20);
}
.civitai-preference-group.theme-group {
    flex: 0 0 50%;
}

.civitai-setting-info {
    flex: 1;
}
.civitai-setting-info h4 {
    margin: 0 0 6px 0;
    color: var(--text-primary);
    font-size: 15px;
    font-weight: 600;
    line-height: 1.3;
}
.civitai-setting-info p {
    margin: 0;
    color: var(--text-tertiary);
    font-size: 13px;
    line-height: 1.4;
}

/* -- Custom Checkboxes (Switches) -- */
.civitai-custom-checkbox {
    position: relative;
    display: inline-block;
    width: 52px;
    height: 28px;
    flex-shrink: 0;
    box-sizing: border-box;
}

.civitai-custom-checkbox input {
    opacity: 0;
    width: 0;
    height: 0;
}

.civitai-checkbox-slider {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--switch-bg);
    border: 2px solid var(--switch-border);
    border-radius: 28px;
    box-sizing: border-box;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.civitai-checkbox-slider:before {
    position: absolute;
    content: '';
    height: 20px;
    width: 20px;
    left: 2px;
    bottom: 2px;
    background: var(--switch-thumb-bg);
    border-radius: 50%;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

input:checked + .civitai-checkbox-slider {
    background: var(--switch-active-bg);
    border-color: var(--primary-hover);
}
input:checked + .civitai-checkbox-slider:before {
    transform: translateX(24px);
    box-shadow: 0 4px 8px var(--shadow-primary-light);
}

/* -- Blur Slider -- */
.civitai-setting-item.blur-slider-item {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
}
.civitai-setting-item.blur-slider-item.disabled {
    opacity: 0.5;
}

.civitai-setting-blur-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.civitai-blur-value {
    padding: 4px 8px;
    background: var(--primary-color-10);
    border: 1px solid var(--primary-color-30);
    border-radius: 6px;
    color: var(--primary-color);
    font-size: 12px;
    font-weight: 600;
    flex-shrink: 0;
}

/* Custom Range Slider */
.civitai-custom-slider {
    position: relative;
    margin: 4px 0;
    height: 40px;
    display: flex;
    align-items: center;
}

.civitai-slider-labels {
    position: absolute;
    bottom: -10px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    color: var(--text-tertiary);
    font-size: 11px;
    pointer-events: none;
    opacity: 0;
    transform: translateY(-5px);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.civitai-slider-labels.show {
    opacity: 1;
    transform: translateY(0);
}

.civitai-custom-slider input[type='range'] {
    position: absolute;
    width: 100%;
    height: 100%;
    background: transparent;
    outline: none;
    cursor: default;
    pointer-events: none;
    opacity: 0;
    z-index: 1;
}

.civitai-slider-track {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 6px;
    background: var(--slider-track-bg);
    border: 1px solid var(--slider-track-border);
    border-radius: 3px;
    transform: translateY(-50%);
    cursor: pointer;
    z-index: 1;
}
.civitai-slider-track::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: var(--progress, 50%);
    height: 100%;
    background: linear-gradient(135deg, var(--slider-progress-start) 0%, var(--slider-progress-end) 100%);
    border-radius: 3px;
    transition: width 0.2s ease;
}

.civitai-slider-thumb {
    position: absolute;
    top: 50%;
    width: 20px;
    height: 20px;
    background: var(--slider-thumb-bg);
    border: 3px solid var(--slider-thumb-border);
    border-radius: 50%;
    box-shadow: 0 2px 6px var(--shadow-primary-light);
    transform: translate(-50%, -50%);
    cursor: grab;
    z-index: 2;
    transition: all 0.2s ease;
    user-select: none;
}
.civitai-slider-thumb:hover {
    box-shadow: 0 4px 12px var(--shadow-primary);
    transform: translate(-50%, -50%) scale(1.1);
}
.civitai-slider-thumb:active {
    cursor: grabbing;
    transform: translate(-50%, -50%) scale(1.05);
}

.civitai-setting-item.disabled .civitai-slider-thumb,
.civitai-setting-item.disabled .civitai-slider-track {
    cursor: not-allowed;
    opacity: 0.5;
}

/* -- Language selection -- */
.civitai-language-selector {
    position: relative;
    width: 100%;
}

.civitai-language-btn {
    position: relative;
    padding: 12px 16px;
    background: var(--selector-bg);
    border: 1px solid var(--selector-border);
    border-radius: 12px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: 15px;
    font-weight: 500;
    overflow: hidden;
    transition: all 0.3s ease;
}

.civitai-language-btn svg {
    transition: transform 0.3s ease;
}

.civitai-language-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 6px;
    width: 100%;
    background: var(--selector-dropdown-bg);
    border: 1px solid var(--selector-dropdown-border);
    border-radius: 12px;
    box-shadow: 0 10px 30px var(--shadow-dark);
    box-sizing: border-box;
    opacity: 0;
    visibility: hidden;
    overflow: hidden;
    transform: translateY(-10px);
    z-index: 10;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.civitai-language-dropdown.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.civitai-language-selector:has(.civitai-language-dropdown.show) .civitai-language-btn svg {
    transform: rotate(180deg);
}

.civitai-language-option {
    position: relative;
    padding: 12px 16px;
    color: var(--text-secondary);
    box-sizing: border-box;
    cursor: pointer;
    display: flex;
    align-items: center;
    overflow: hidden;
    gap: 12px;
    transition: all 0.2s;
}
.civitai-language-option:hover {
    background: var(--selector-option-hover);
    color: var(--text-secondary);
}

.civitai-language-option.active {
    background: var(--selector-option-active);
    color: var(--primary-color);
    font-weight: 600;
}
.civitai-language-option.active::after {
    content: 'âœ“';
    margin-left: auto;
    color: var(--primary-color);
    font-weight: bold;
}

.civitai-language-flag {
    width: 24px;
    height: 18px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    font-size: 11px;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* -- Theme selection -- */
.civitai-theme-selector {
    display: flex;
    gap: 8px;
    width: 100%;
}

.civitai-theme-option {
    flex: 1;
    padding: 12px 8px;
    background: var(--selector-bg);
    border: 1px solid var(--selector-border);
    border-radius: 12px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: 12px;
    font-weight: 500;
    transition: all 0.3s ease;
}
.civitai-theme-option:hover {
    background: var(--primary-color-10);
    border-color: var(--primary-color-30);
    color: var(--text-secondary);
    transform: translateY(-2px);
}

.civitai-theme-option.active {
    background: var(--primary-color-20);
    border-color: var(--primary-color-50);
    color: var(--primary-color);
}

.civitai-theme-option svg {
    transition: transform 0.3s ease;
}

.civitai-theme-option:hover svg {
    transform: scale(1.1);
}

/* === Footer === */
.civitai-popup-footer {
    padding: 20px 24px;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-primary);
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
}

.civitai-watermark {
    display: flex;
    align-items: center;
    gap: 12px;
}

.civitai-author-avatar {
    width: 32px;
    height: 32px;
    border: 2px solid var(--primary-color-30);
    border-radius: 50%;
    transition: all 0.3s ease;
}
.civitai-watermark:hover .civitai-author-avatar {
    border-color: var(--primary-color-50);
    transform: scale(1.05);
}

.civitai-author-link {
    position: relative;
    padding: 4px 0;
    color: var(--text-tertiary);
    font-size: 14px;
    text-decoration: none;
    transition: all 0.2s;
}
.civitai-author-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background: var(--text-tertiary);
    transform: scaleX(0.75);
    transition: transform 0.2s;
}
.civitai-author-link:hover {
    color: var(--text-secondary);
}
.civitai-author-link:hover::after {
    transform: scaleX(1);
}

.civitai-footer-buttons {
    display: flex;
    gap: 12px;
}

.civitai-popup-footer button {
    padding: 12px 26px;
    min-width: 110px;
    border: none;
    border-radius: 12px;
    box-sizing: border-box;
    font-size: 15px;
    font-weight: 500;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.civitai-save-btn {
    color: var(--btn-primary-color);
    background: var(--btn-primary-bg);
    box-shadow: 0 4px 15px var(--btn-primary-shadow);
}
.civitai-save-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px var(--shadow-primary-light);
}

.civitai-reset-btn {
    color: var(--btn-secondary-color);
    background: var(--btn-secondary-bg);
    border: 1px solid var(--btn-secondary-border);
}
.civitai-reset-btn:hover {
    background: var(--btn-secondary-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--shadow-dark);
}

/* === Styles for hiding elements === */
/* Hide decorative user avatar overlays */
body.civitai-hide-avatar-animations img[src*='user avatar decoration'] {
    display: none !important;
}

/* Hide profile badges */
body.civitai-hide-profile-badges [class*='AspectRatioImageCard_footer__'] div[style*="display: flex; width: 28px;"],                    /* Badges on Card (Models Cards Page) */
body.civitai-hide-profile-badges [class*='mantine-Card-root'] [class*='mantine-Group-root'] div[style*="display: flex; width: 60px;"],  /* Badges on UserData (Model Page) */
body.civitai-hide-profile-badges [class*='MasonryContainer_queries__'] div[style*="display: flex; width: 20px;"] {
    display: none !important;
}

/* Hide profile banner videos */
body.civitai-hide-profile-banners [class*='mantine-Card-root'] [class*='mantine-Card-section'] [class*='EdgeVideo_iosScroll__'] video {
    display: none !important;
}

/* Normalize author names */
/* Note: This only works on model cards, not on the author's profile page */
body.civitai-normalize-author-names [class*='UserAvatarSimple_username__'],                                 /* Author name on Card (Models Cards Page) */
body.civitai-normalize-author-names [class*='CreatorCard_profileDetails__'] p[data-variant='gradient'] {    /* Author name UserData (Model Page)*/
    color: white !important;
    font-size: 14px !important;
    font-weight: 500 !important;
    background: none !important;
    background-image: none !important;
    -webkit-background-clip: unset !important;
    background-clip: unset !important;
    -webkit-text-fill-color: white !important;
    text-fill-color: white !important;
}

/* Remove card glow and cosmetic frame styles */
body.civitai-hide-card-glow [class*='CosmeticWrapper_wrapper__'],
body.civitai-hide-card-glow [class*='CosmeticWrapper_cssFrame__'],
body.civitai-hide-card-glow [class*='CosmeticWrapper_glow__'] {
    --bgGradient: none !important;
    background: none !important;
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}
/* Hide pseudo-elements (::after & ::before) used for decorative effects */
body.civitai-hide-card-glow [class*='CosmeticWrapper_wrapper__']::after,
body.civitai-hide-card-glow [class*='CosmeticWrapper_cssFrame__']::after,
body.civitai-hide-card-glow [class*='CosmeticWrapper_glow__']::after,
body.civitai-hide-card-glow [class*='CosmeticWrapper_wrapper__']::before,
body.civitai-hide-card-glow [class*='CosmeticWrapper_cssFrame__']::before,
body.civitai-hide-card-glow [class*='CosmeticWrapper_glow__']::before {
    content: none !important;
    display: none !important;
}

/* Improve card appearance */
body.civitai-improve-card-appearance {
    /* Apply blur effect to model type info chips in header */
    [class*='AspectRatioImageCard_header__'] [class*='Cards_infoChip__'],   /* Info on Model Cards */
    [class*='AspectRatioImageCard_header__'] [class*='Cards_reactions_'],   /* Reactions on Model Cards */
    [class*='ModelCarousel_reactions_'],                                    /* Reactions on Images model Carousel */
    [class*='ImagesAsPostsCard_reactions__'] {                              /* Reactions on User Images List on Model Page */
        background: rgba(0, 0, 0, 0.5) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7), 0 0px 1px rgba(0, 0, 0, 0.5);
    }
    /* Apply blur effect to statistics chips in footer */
    [class*='AspectRatioImageCard_footer__'] [class*='Cards_statChip__'],
    [class*='AspectRatioImageCard_footer__'] [class*='Cards_reactions_'],
    [class*='ModelCarousel_reactions_'],
    [class*='ImagesAsPostsCard_reactions__'] {
        background: rgba(0, 0, 0, 0.5) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7), 0 0px 1px rgba(0, 0, 0, 0.5);
    }

    /* Reduce text size in card footer for better compactness */
    [class*='AspectRatioImageCard_footer__'] p[data-size='xl'] {
        font-size: 16px !important;
        line-height: 1.1 !important;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7), 0 0px 1px rgba(0, 0, 0, 0.5);
        display: -webkit-box !important;
        -webkit-line-clamp: 2 !important;
        -webkit-box-orient: vertical !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-height: calc(2 * 1.1em) !important; /* Ensures only 2 lines are visible */
    }

    /* Special style for info Button in header */
    [class*='AspectRatioImageCard_header__'] [class*='mantine-ActionIcon-root'],    /* Info Button on Card (Models Cards Page) */
    [class*='transform-3d'] [class*='mantine-ActionIcon-root'] {                    /* Info Button on Card (Users Images List on Model Page) */
        background: rgba(0, 0, 0, 0.5) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        border-radius: 50% !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
    }
    /* Make the SVG icon inside the ActionIcon smaller */
    [class*='AspectRatioImageCard_header__'] [class*='mantine-ActionIcon-root'] svg,
    [class*='transform-3d'] [class*='mantine-ActionIcon-root'] svg {
        width: 18px !important;
        height: 18px !important;
    }

    /* Special style for ImageGuard_red__ chips in header and footer */
    [class*='AspectRatioImageCard_header__'] [class*='ImageGuard_red__'],
    [class*='AspectRatioImageCard_footer__'] [class*='ImageGuard_red__'],
    [class*='ImageGuard_red__'] {
        background: rgba(220, 38, 38, 0.6) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
    }

    /* Specific style for Early Access/Update chip */
    [class*='AspectRatioImageCard_header__'] [class*='Cards_chip__'][data-variant="filled"] {
        background: rgba(0, 100, 0, 0.25) !important;
        border: 1px solid rgba(0, 200, 0, 0.5) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7), 0 0px 1px rgba(0, 0, 0, 0.5);
    }

    /* Add gradient shadow to card footer for better text readability */
    [class*='AspectRatioImageCard_footer__']::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 120px;
        background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.9));
        pointer-events: none;
        z-index: 1;
    }
    /* Ensure text content stays above the shadow */
    [class*='AspectRatioImageCard_footer__'] > * {
        z-index: 2;
    }
}

/* Hide any Pro badge/button (matches any variation) */
body.civitai-hide-pro-badges a[href*='/pricing'][class*='SupportButton_supportButton'] {
    display: none !important;
}

/* Hide "Updates" and "Shop" navigation buttons */
body.civitai-hide-updates-button a[href='/changelog'],
body.civitai-hide-purchase-buttons a[href='/shop'] {
    display: none !important;
}

/* === Unimplemented settings styling === */
.civitai-setting-item.unimplemented {
    opacity: 0.6;
    position: relative;
    cursor: not-allowed;
}
.civitai-setting-item.unimplemented::after {
    content: 'ðŸš§';
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 14px;
    opacity: 0.7;
}

.civitai-setting-item.unimplemented .civitai-custom-checkbox {
    pointer-events: none;
}
.civitai-setting-item.unimplemented .civitai-checkbox-slider {
    opacity: 0.5;
    cursor: not-allowed;
}

.civitai-setting-item.unimplemented .civitai-setting-info h4 {
    color: var(--text-tertiary);
}
.civitai-setting-item.unimplemented .civitai-setting-info p {
    color: var(--text-quaternary);
    font-style: italic;
}
